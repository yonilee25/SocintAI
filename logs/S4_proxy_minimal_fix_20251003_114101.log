{"ts":"2025-10-03T11:41:01.0731582-07:00","level":"info","step":"S4.proxy_minimal_fix","req_id":"77caa529-0d84-48c1-9599-49b3d7f62fc9","op":"start","msg":"Minimal ARR proxy to slot A (fix)","data":{"machine":"DESKTOP-388OTB4","user":"yoni"}}
{"ts":"2025-10-03T11:41:01.0946928-07:00","level":"info","step":"S4.proxy_minimal_fix","req_id":"77caa529-0d84-48c1-9599-49b3d7f62fc9","op":"env.admin","msg":"Already elevated","data":{}}
{"ts":"2025-10-03T11:41:01.1121972-07:00","level":"info","step":"S4.proxy_minimal_fix","req_id":"77caa529-0d84-48c1-9599-49b3d7f62fc9","op":"state","msg":"Loaded bg ports","data":{"portB":8082,"state_file":"C:\\SocintAI\\env\\bg_ports.json","portA":8081}}
{"ts":"2025-10-03T11:41:01.1591690-07:00","level":"info","step":"S4.proxy_minimal_fix","req_id":"77caa529-0d84-48c1-9599-49b3d7f62fc9","op":"mods","msg":"Module presence","data":{"rewrite":["MODULE \"RewriteModule\" ( native, preCondition: )"],"proxy":[]}}
{"ts":"2025-10-03T11:41:01.2801739-07:00","level":"info","step":"S4.proxy_minimal_fix","req_id":"77caa529-0d84-48c1-9599-49b3d7f62fc9","op":"proxy.section","msg":"ARR proxy settings","data":{"get_out":["<system.webServer>","  <proxy enabled=\"true\" preserveHostHeader=\"true\" reverseRewriteHostInResponseHeaders=\"true\">","    <cache />","  </proxy>","</system.webServer>"],"rcSet":0,"rcGet":0,"set_out":"Applied configuration changes to section \"system.webServer/proxy\" for \"MACHINE/WEBROOT/APPHOST\" at configuration commit path \"MACHINE/WEBROOT/APPHOST\"","preserveHost":["  <proxy enabled=\"true\" preserveHostHeader=\"true\" reverseRewriteHostInResponseHeaders=\"true\">"],"enabled":true}}
{"ts":"2025-10-03T11:41:01.2925065-07:00","level":"info","step":"S4.proxy_minimal_fix","req_id":"77caa529-0d84-48c1-9599-49b3d7f62fc9","op":"webconfig.write","msg":"Wrote minimal proxy web.config","data":{"root":"C:\\inetpub\\SocintGateway","upstream":8081}}
{"ts":"2025-10-03T11:41:01.6717577-07:00","level":"warn","step":"S4.proxy_minimal_fix","req_id":"77caa529-0d84-48c1-9599-49b3d7f62fc9","op":"probe.health","msg":"Gateway /healthz failed","data":{"err":" \n \n \nIIS 10.0 Detailed Error - 500.19 - Internal Server Error \n \n \n \n \n \n \n \n \n  HTTP Error 500.19 - Internal Server Error \n  The requested page cannot be accessed because the related configuration data for the page is invalid. \n \n \n \n Detailed Error Information: \n   \n    \n    Module&nbsp;&nbsp;&nbsp;WebSocketModule \n    Notification&nbsp;&nbsp;&nbsp;BeginRequest \n    Handler&nbsp;&nbsp;&nbsp;StaticFile \n    Error Code&nbsp;&nbsp;&nbsp;0x80070021 \n    Config Error&nbsp;&nbsp;&nbsp;This configuration section cannot be used at this path. This happens when the section is locked at a parent level. Locking is either by default (overrideModeDefault=&quot;Deny&quot;), or set explicitly by a location tag with overrideMode=&quot;Deny&quot; or the legacy allowOverride=&quot;false&quot;.\r\n \nConfig File&nbsp;&nbsp;&nbsp;\\\\?\\C:\\inetpub\\SocintGateway\\web.config \n    \n   \n   \n    \n    Requested URL&nbsp;&nbsp;&nbsp;https://localhost:8443/healthz \n    Physical Path&nbsp;&nbsp;&nbsp;C:\\inetpub\\SocintGateway\\healthz \n    Logon Method&nbsp;&nbsp;&nbsp;Not yet determined \n    Logon User&nbsp;&nbsp;&nbsp;Not yet determined \n     \n    \n    \n   \n  \n \n   \n     \n    Config Source: \n       18:     &lt;/rewrite&gt;\r\n   19:     &lt;webSocket enabled=&quot;true&quot; /&gt;\r\n   20:     &lt;httpProtocol&gt;\r\n \n     \n   \n \n \n More Information: \n  This error occurs when there is a problem reading the configuration file for the Web server or Web application. In some cases, the event logs may contain more information about what caused this error. \n  View more information &raquo; \n   \n  \n \n \n \n \n"}}
{"ts":"2025-10-03T11:41:01.6865687-07:00","level":"warn","step":"S4.proxy_minimal_fix","req_id":"77caa529-0d84-48c1-9599-49b3d7f62fc9","op":"probe.root","msg":"Gateway root failed","data":{"err":" \n \n \nIIS 10.0 Detailed Error - 500.19 - Internal Server Error \n \n \n \n \n \n \n \n \n  HTTP Error 500.19 - Internal Server Error \n  The requested page cannot be accessed because the related configuration data for the page is invalid. \n \n \n \n Detailed Error Information: \n   \n    \n    Module&nbsp;&nbsp;&nbsp;WebSocketModule \n    Notification&nbsp;&nbsp;&nbsp;BeginRequest \n    Handler&nbsp;&nbsp;&nbsp;StaticFile \n    Error Code&nbsp;&nbsp;&nbsp;0x80070021 \n    Config Error&nbsp;&nbsp;&nbsp;This configuration section cannot be used at this path. This happens when the section is locked at a parent level. Locking is either by default (overrideModeDefault=&quot;Deny&quot;), or set explicitly by a location tag with overrideMode=&quot;Deny&quot; or the legacy allowOverride=&quot;false&quot;.\r\n \nConfig File&nbsp;&nbsp;&nbsp;\\\\?\\C:\\inetpub\\SocintGateway\\web.config \n    \n   \n   \n    \n    Requested URL&nbsp;&nbsp;&nbsp;https://localhost:8443/ \n    Physical Path&nbsp;&nbsp;&nbsp;C:\\inetpub\\SocintGateway \n    Logon Method&nbsp;&nbsp;&nbsp;Not yet determined \n    Logon User&nbsp;&nbsp;&nbsp;Not yet determined \n     \n    \n    \n   \n  \n \n   \n     \n    Config Source: \n       18:     &lt;/rewrite&gt;\r\n   19:     &lt;webSocket enabled=&quot;true&quot; /&gt;\r\n   20:     &lt;httpProtocol&gt;\r\n \n     \n   \n \n \n More Information: \n  This error occurs when there is a problem reading the configuration file for the Web server or Web application. In some cases, the event logs may contain more information about what caused this error. \n  View more information &raquo; \n   \n  \n \n \n \n \n"}}
{"ts":"2025-10-03T11:41:01.7043566-07:00","level":"warn","step":"S4.proxy_minimal_fix","req_id":"77caa529-0d84-48c1-9599-49b3d7f62fc9","op":"summary","msg":"S4.2a minimal proxy summary","data":{"arr_proxy_enabled":true,"preserve_host_enabled":["  <proxy enabled=\"true\" preserveHostHeader=\"true\" reverseRewriteHostInResponseHeaders=\"true\">"],"upstream_port":8081,"active_slot":"A","gateway_health_ok":false,"probe_root_via_gateway_ok":false,"slot_hint_header":"","log_file":"C:\\SocintAI\\logs\\S4_proxy_minimal_fix_20251003_114101.log","duration_ms":645,"ready_for_S4_3":false}}
