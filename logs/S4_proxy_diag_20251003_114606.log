{"ts":"2025-10-03T11:46:06.9785853-07:00","level":"info","step":"S4.proxy_diag","req_id":"618dd1c8-1e97-4fca-9383-5df9423cc1cf","op":"start","msg":"Diagnosing gateway rewrite/proxy & probes","data":{"machine":"DESKTOP-388OTB4","user":"yoni"}}
{"ts":"2025-10-03T11:46:06.9915392-07:00","level":"info","step":"S4.proxy_diag","req_id":"618dd1c8-1e97-4fca-9383-5df9423cc1cf","op":"env.admin","msg":"Already elevated","data":{}}
{"ts":"2025-10-03T11:46:07.0084795-07:00","level":"info","step":"S4.proxy_diag","req_id":"618dd1c8-1e97-4fca-9383-5df9423cc1cf","op":"state","msg":"Loaded bg ports","data":{"portA":8081,"portB":8082}}
{"ts":"2025-10-03T11:46:07.0619752-07:00","level":"info","step":"S4.proxy_diag","req_id":"618dd1c8-1e97-4fca-9383-5df9423cc1cf","op":"site.bind","msg":"IIS binding check","data":{"https_binding_ok":true,"bindings":"https/*:8443:"}}
{"ts":"2025-10-03T11:46:07.1098570-07:00","level":"info","step":"S4.proxy_diag","req_id":"618dd1c8-1e97-4fca-9383-5df9423cc1cf","op":"proxy.section","msg":"ARR proxy section read","data":{"enabled":["  <proxy enabled=\"true\" preserveHostHeader=\"true\" reverseRewriteHostInResponseHeaders=\"true\">"],"raw":["<system.webServer>","  <proxy enabled=\"true\" preserveHostHeader=\"true\" reverseRewriteHostInResponseHeaders=\"true\">","    <cache />","  </proxy>","</system.webServer>"]}}
{"ts":"2025-10-03T11:46:07.1538294-07:00","level":"warn","step":"S4.proxy_diag","req_id":"618dd1c8-1e97-4fca-9383-5df9423cc1cf","op":"rewrite.section","msg":"Rewrite section read","data":{"sample":"ERROR ( message:Unknown config section \"system.webServer/rewrite\".  Replace with ? for help. )","ok":false}}
{"ts":"2025-10-03T11:46:07.6285986-07:00","level":"warn","step":"S4.proxy_diag","req_id":"618dd1c8-1e97-4fca-9383-5df9423cc1cf","op":"summary","msg":"S4.2b diag summary","data":{"https_binding_ok":true,"arr_proxy_enabled":["  <proxy enabled=\"true\" preserveHostHeader=\"true\" reverseRewriteHostInResponseHeaders=\"true\">"],"rewrite_section_ok":false,"probe_health":{"gateway":{"url":"https://localhost:8443/healthz","ok":false,"code":-1,"why":" \n \n \nIIS 10.0 Detailed Error - 500.19 - Internal Server Error \n \n \n \n \n \n \n \n \n  HTTP Error 500.19 - Internal Server Error \n  The requested page cannot be accessed because the related configuration data for the page is invalid. \n \n \n \n Detailed Error Information: \n   \n    \n    Module&nbsp;&nbsp;&nbsp;WebSocketModule \n    Notification&nbsp;&nbsp;&nbsp;BeginRequest \n    Handler&nbsp;&nbsp;&nbsp;StaticFile \n    Error Code&nbsp;&nbsp;&nbsp;0x80070021 \n    Config Error&nbsp;&nbsp;&nbsp;This configuration section cannot be used at this path. This happens when the section is locked at a parent level. Locking is either by default (overrideModeDefault=&quot;Deny&quot;), or set explicitly by a location tag with overrideMode=&quot;Deny&quot; or the legacy allowOverride=&quot;false&quot;.\r\n \nConfig File&nbsp;&nbsp;&nbsp;\\\\?\\C:\\inetpub\\SocintGateway\\web.config \n    \n   \n   \n    \n    Requested URL&nbsp;&nbsp;&nbsp;https://localhost:8443/healthz \n    Physical Path&nbsp;&nbsp;&nbsp;C:\\inetpub\\SocintGateway\\healthz \n    Logon Method&nbsp;&nbsp;&nbsp;Not yet determined \n    Logon User&nbsp;&nbsp;&nbsp;Not yet determined \n     \n    \n    \n   \n  \n \n   \n     \n    Config Source: \n       18:     &lt;/rewrite&gt;\r\n   19:     &lt;webSocket enabled=&quot;true&quot; /&gt;\r\n   20:     &lt;httpProtocol&gt;\r\n \n     \n   \n \n \n More Information: \n  This error occurs when there is a problem reading the configuration file for the Web server or Web application. In some cases, the event logs may contain more information about what caused this error. \n  View more information &raquo; \n   \n  \n \n \n \n \n","sample":""}},"probe_root":{"gateway":{"url":"https://localhost:8443/","ok":false,"code":-1,"why":" \n \n \nIIS 10.0 Detailed Error - 500.19 - Internal Server Error \n \n \n \n \n \n \n \n \n  HTTP Error 500.19 - Internal Server Error \n  The requested page cannot be accessed because the related configuration data for the page is invalid. \n \n \n \n Detailed Error Information: \n   \n    \n    Module&nbsp;&nbsp;&nbsp;WebSocketModule \n    Notification&nbsp;&nbsp;&nbsp;BeginRequest \n    Handler&nbsp;&nbsp;&nbsp;StaticFile \n    Error Code&nbsp;&nbsp;&nbsp;0x80070021 \n    Config Error&nbsp;&nbsp;&nbsp;This configuration section cannot be used at this path. This happens when the section is locked at a parent level. Locking is either by default (overrideModeDefault=&quot;Deny&quot;), or set explicitly by a location tag with overrideMode=&quot;Deny&quot; or the legacy allowOverride=&quot;false&quot;.\r\n \nConfig File&nbsp;&nbsp;&nbsp;\\\\?\\C:\\inetpub\\SocintGateway\\web.config \n    \n   \n   \n    \n    Requested URL&nbsp;&nbsp;&nbsp;https://localhost:8443/ \n    Physical Path&nbsp;&nbsp;&nbsp;C:\\inetpub\\SocintGateway \n    Logon Method&nbsp;&nbsp;&nbsp;Not yet determined \n    Logon User&nbsp;&nbsp;&nbsp;Not yet determined \n     \n    \n    \n   \n  \n \n   \n     \n    Config Source: \n       18:     &lt;/rewrite&gt;\r\n   19:     &lt;webSocket enabled=&quot;true&quot; /&gt;\r\n   20:     &lt;httpProtocol&gt;\r\n \n     \n   \n \n \n More Information: \n  This error occurs when there is a problem reading the configuration file for the Web server or Web application. In some cases, the event logs may contain more information about what caused this error. \n  View more information &raquo; \n   \n  \n \n \n \n \n","sample":""},"directA":{"url":"http://127.0.0.1:8081/","ok":false,"code":-1,"why":" \n \n \nIIS 10.0 Detailed Error - 500.19 - Internal Server Error \n \n \n \n \n \n \n \n \n  HTTP Error 500.19 - Internal Server Error \n  The requested page cannot be accessed because the related configuration data for the page is invalid. \n \n \n \n Detailed Error Information: \n   \n    \n    Module&nbsp;&nbsp;&nbsp;DefaultDocumentModule \n    Notification&nbsp;&nbsp;&nbsp;ExecuteRequestHandler \n    Handler&nbsp;&nbsp;&nbsp;StaticFile \n    Error Code&nbsp;&nbsp;&nbsp;0x800700b7 \n    Config Error&nbsp;&nbsp;&nbsp;Cannot add duplicate collection entry of type 'add' with unique key attribute 'value' set to 'index.html'\r\n \nConfig File&nbsp;&nbsp;&nbsp;\\\\?\\C:\\inetpub\\SocintFrontend_A\\web.config \n    \n   \n   \n    \n    Requested URL&nbsp;&nbsp;&nbsp;http://127.0.0.1:8081/ \n    Physical Path&nbsp;&nbsp;&nbsp;C:\\inetpub\\SocintFrontend_A \n    Logon Method&nbsp;&nbsp;&nbsp;Anonymous \n    Logon User&nbsp;&nbsp;&nbsp;Anonymous \n     \n    \n    \n   \n  \n \n   \n     \n    Config Source: \n       21:     &lt;defaultDocument&gt;\r\n   22:       &lt;files&gt;&lt;add value=&quot;index.html&quot; /&gt;&lt;/files&gt;\r\n   23:     &lt;/defaultDocument&gt;\r\n \n     \n   \n \n \n More Information: \n  This error occurs when there is a problem reading the configuration file for the Web server or Web application. In some cases, the event logs may contain more information about what caused this error. \n  View more information &raquo; \n   \n  \n \n \n \n \n","sample":""}},"error_hint":"500.19: invalid web.config (likely rewrite section)","log_file":"C:\\SocintAI\\logs\\S4_proxy_diag_20251003_114606.log","duration_ms":662,"ready_for_S4_3":false}}
