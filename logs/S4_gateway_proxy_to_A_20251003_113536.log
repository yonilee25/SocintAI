{"ts":"2025-10-03T11:35:36.9654193-07:00","level":"info","step":"S4.gateway_proxy_to_A","req_id":"30598301-8408-4f39-8eeb-776bccb5cb3a","op":"start","msg":"Enabling ARR reverse-proxy to slot A","data":{"repoRoot":"C:\\SocintAI","machine":"DESKTOP-388OTB4","user":"yoni"}}
{"ts":"2025-10-03T11:35:36.9847659-07:00","level":"info","step":"S4.gateway_proxy_to_A","req_id":"30598301-8408-4f39-8eeb-776bccb5cb3a","op":"env.admin","msg":"Already elevated","data":{}}
{"ts":"2025-10-03T11:35:36.9983667-07:00","level":"info","step":"S4.gateway_proxy_to_A","req_id":"30598301-8408-4f39-8eeb-776bccb5cb3a","op":"state","msg":"Loaded bg ports","data":{"state_file":"C:\\SocintAI\\env\\bg_ports.json","portA":8081,"portB":8082}}
{"ts":"2025-10-03T11:35:37.1274571-07:00","level":"warn","step":"S4.gateway_proxy_to_A","req_id":"30598301-8408-4f39-8eeb-776bccb5cb3a","op":"proxy.section","msg":"ARR proxy settings","data":{"preserveHostHeader":[],"raw":["<system.webServer>","  <proxy enabled=\"true\" preserveHostHeader=\"true\" reverseRewriteHostInResponseHeaders=\"false\">","    <cache />","  </proxy>","</system.webServer>"],"enabled":[]}}
{"ts":"2025-10-03T11:35:37.1401763-07:00","level":"info","step":"S4.gateway_proxy_to_A","req_id":"30598301-8408-4f39-8eeb-776bccb5cb3a","op":"webconfig.write","msg":"Wrote gateway reverse-proxy web.config (to A)","data":{"root":"C:\\inetpub\\SocintGateway","upstreamPort":8081}}
{"ts":"2025-10-03T11:35:37.5166871-07:00","level":"warn","step":"S4.gateway_proxy_to_A","req_id":"30598301-8408-4f39-8eeb-776bccb5cb3a","op":"probe.health","msg":"Gateway /healthz probe failed","data":{"err":" \n \n \nIIS 10.0 Detailed Error - 500.19 - Internal Server Error \n \n \n \n \n \n \n \n \n  HTTP Error 500.19 - Internal Server Error \n  The requested page cannot be accessed because the related configuration data for the page is invalid. \n \n \n \n Detailed Error Information: \n   \n    \n    Module&nbsp;&nbsp;&nbsp;WebSocketModule \n    Notification&nbsp;&nbsp;&nbsp;BeginRequest \n    Handler&nbsp;&nbsp;&nbsp;StaticFile \n    Error Code&nbsp;&nbsp;&nbsp;0x80070021 \n    Config Error&nbsp;&nbsp;&nbsp;This configuration section cannot be used at this path. This happens when the section is locked at a parent level. Locking is either by default (overrideModeDefault=&quot;Deny&quot;), or set explicitly by a location tag with overrideMode=&quot;Deny&quot; or the legacy allowOverride=&quot;false&quot;.\r\n \nConfig File&nbsp;&nbsp;&nbsp;\\\\?\\C:\\inetpub\\SocintGateway\\web.config \n    \n   \n   \n    \n    Requested URL&nbsp;&nbsp;&nbsp;https://localhost:8443/healthz \n    Physical Path&nbsp;&nbsp;&nbsp;C:\\inetpub\\SocintGateway\\healthz \n    Logon Method&nbsp;&nbsp;&nbsp;Not yet determined \n    Logon User&nbsp;&nbsp;&nbsp;Not yet determined \n     \n    \n    \n   \n  \n \n   \n     \n    Config Source: \n       37:     &lt;/rewrite&gt;\r\n   38:     &lt;webSocket enabled=&quot;true&quot; /&gt;\r\n   39:     &lt;httpProtocol&gt;\r\n \n     \n   \n \n \n More Information: \n  This error occurs when there is a problem reading the configuration file for the Web server or Web application. In some cases, the event logs may contain more information about what caused this error. \n  View more information &raquo; \n   \n  \n \n \n \n \n"}}
{"ts":"2025-10-03T11:35:37.5335609-07:00","level":"warn","step":"S4.gateway_proxy_to_A","req_id":"30598301-8408-4f39-8eeb-776bccb5cb3a","op":"probe.root","msg":"Gateway root probe failed","data":{"err":" \n \n \nIIS 10.0 Detailed Error - 500.19 - Internal Server Error \n \n \n \n \n \n \n \n \n  HTTP Error 500.19 - Internal Server Error \n  The requested page cannot be accessed because the related configuration data for the page is invalid. \n \n \n \n Detailed Error Information: \n   \n    \n    Module&nbsp;&nbsp;&nbsp;WebSocketModule \n    Notification&nbsp;&nbsp;&nbsp;BeginRequest \n    Handler&nbsp;&nbsp;&nbsp;StaticFile \n    Error Code&nbsp;&nbsp;&nbsp;0x80070021 \n    Config Error&nbsp;&nbsp;&nbsp;This configuration section cannot be used at this path. This happens when the section is locked at a parent level. Locking is either by default (overrideModeDefault=&quot;Deny&quot;), or set explicitly by a location tag with overrideMode=&quot;Deny&quot; or the legacy allowOverride=&quot;false&quot;.\r\n \nConfig File&nbsp;&nbsp;&nbsp;\\\\?\\C:\\inetpub\\SocintGateway\\web.config \n    \n   \n   \n    \n    Requested URL&nbsp;&nbsp;&nbsp;https://localhost:8443/ \n    Physical Path&nbsp;&nbsp;&nbsp;C:\\inetpub\\SocintGateway \n    Logon Method&nbsp;&nbsp;&nbsp;Not yet determined \n    Logon User&nbsp;&nbsp;&nbsp;Not yet determined \n     \n    \n    \n   \n  \n \n   \n     \n    Config Source: \n       37:     &lt;/rewrite&gt;\r\n   38:     &lt;webSocket enabled=&quot;true&quot; /&gt;\r\n   39:     &lt;httpProtocol&gt;\r\n \n     \n   \n \n \n More Information: \n  This error occurs when there is a problem reading the configuration file for the Web server or Web application. In some cases, the event logs may contain more information about what caused this error. \n  View more information &raquo; \n   \n  \n \n \n \n \n"}}
{"ts":"2025-10-03T11:35:37.5525110-07:00","level":"warn","step":"S4.gateway_proxy_to_A","req_id":"30598301-8408-4f39-8eeb-776bccb5cb3a","op":"summary","msg":"S4.2 proxy-to-A summary","data":{"active_slot":"A","upstream_port":8081,"log_file":"C:\\SocintAI\\logs\\S4_gateway_proxy_to_A_20251003_113536.log","gateway_health_ok":false,"ready_for_S4_3":false,"duration_ms":600,"arr_proxy_enabled":[],"slot_hint_header":"","preserve_host_enabled":[],"probe_root_via_gateway_ok":false}}
